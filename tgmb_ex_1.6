# vim: filetype=make
# See page 10 of "The GNU Make Book"
#
# run with "make -f tgmb_ex_1.6"
#
# Override global vars for target and all dependencies

.PHONY: all foo bar baz

VAR = global scope

# depends on foo and bar
all: foo bar
all: ; @echo In $@ VAR is $(VAR)

foo: ; @echo In $@ VAR is $(VAR)

# locally scoped variable overrides global VAR
bar: VAR = local scope
bar: baz
bar: ; @echo In $@ VAR is $(VAR)

# run as dependency of bar with overridden VAR
baz: ; @echo In $@ VAR is $(VAR)
